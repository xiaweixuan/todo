var O=Object.defineProperty,A=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var I=(e,t,n)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))k.call(t,n)&&I(e,n,t[n]);if(v)for(var n of v(t))x.call(t,n)&&I(e,n,t[n]);return e},f=(e,t)=>A(e,B(t));var L=(e,t)=>{var n={};for(var r in e)k.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&v)for(var r of v(e))t.indexOf(r)<0&&x.call(e,r)&&(n[r]=e[r]);return n};import{Y as o,u as H,s as C,r as y,n as S,l as j,f as K,p as b,T as $}from"./vendor.010a266c.js";const V=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}};V();function D(e){return o("div",{class:"bg-gray-100 min-h-screen sm:py-36 md:py-40"},o("div",{class:"relative flex min-h-400"},o("div",{class:"absolute top-0 bottom-0 mx-auto lg:w-1/2 md:w-3/4 sm:w-full inset-0 bg-gradient-to-r from-cyan-400 to-sky-500 shadow-lg transform -skew-y-6 sm:skew-y-0 sm:-rotate-6 sm:rounded-3xl"}),o("div",{class:"relative flex-initial bg-white rounded-xl mx-auto lg:w-1/2 md:w-3/4 sm:w-full"},o("div",{className:"py-8 px-10"},e.children))))}var R=D;const z=()=>o("svg",{class:"relative w-3 h-3 stroke-1 -left-1 -bottom-1",xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})),F=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})),J=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})),P=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})),U=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})),q=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})),G=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})),p="170",X=7.5,Y=14,Q=8;function Z(e){if(typeof e!="string")return p;let t=0,n=0;return e.split("").forEach(r=>{r.charCodeAt()<128?t++:n++}),t*X+n*Y}function ee(e){const t=e.style.width;return Number(t.slice(0,t.length-2))}function T(e){const t=Z(e.value),n=ee(e);t>p?e.style.width=`${t+Q}px`:t<p&&n>p&&(e.style.width=`${p}px`)}function te(s){var i=s,{defaultValue:e,onFocus:t,onKeyup:n}=i,r=L(i,["defaultValue","onFocus","onKeyup"]);const l=H();C(()=>{l.current&&(l.current.focus(),T(l.current))},[l.current]);const c=d=>{t&&t(d),l.current.setSelectionRange(l.current.value.length,l.current.value.length)},a=d=>{n&&n(d),T(d.target)};return o("input",f(h({},r),{ref:l,type:"text",onFocus:c,onKeyup:a,defaultValue:e,class:"text-xs w-full outline-none bg-gray-100 rounded-lg py-1 px-2"}))}var M=te;function ne({onOk:e,onCancel:t}){return o("section",{class:"my-1"},o("div",{class:"inline-block relative group"},o("div",{class:"inline-block min-w-300 cursor-pointer group-hover:shadow"},o("div",{class:"relative flex items-center"},o("div",{class:"absolute left-2 rounded-full w-2 h-2 bg-blue-500"}),o("div",{class:"py-3 px-6"},o(M,{onKeyPress:r=>{r.keyCode===13&&e(r.target.value)},onBlur:t}))))))}var N=ne;function _({cell:e,onClick:t,isCollapsed:n,setIsCollapsed:r,editabled:s,onCreate:i}){const[l,c]=y(s||!1),a=u=>{u.keyCode===13&&(c(!1),t(u.target.value?{action:3,id:e.id,dto:f(h({},e),{content:u.target.value})}:{action:2,id:e.id}))},d=u=>{c(!1)};return o("section",{class:"my-1"},o("div",{class:"relative group"},o("div",{class:"inline-block min-w-300 cursor-pointer group-hover:shadow"},o("div",{onClick:()=>!l&&c(!0),class:"relative flex items-center"},o("div",{class:`absolute left-2 rounded-full w-2 h-2 ${e.finished?"bg-green-500":"bg-blue-500"}`}),o("div",{class:`py-3 px-6 ${e.finished?"line-through":""}`},l?o(M,{onBlur:d,onKeyPress:a,defaultValue:e.content}):e.content),e.children&&n&&o(z,null))),o("div",{onClick:()=>t&&t({action:3,id:e.id,dto:f(h({},e),{finished:!e.finished})}),class:"inline-block w-4 h-3 cursor-pointer transform duration-300 opacity-0 group-hover:opacity-100 group-hover:translate-x-4"},e.finished?o(G,null):o(q,null)),o("div",{onClick:i,class:"inline-block w-4 h-3 cursor-pointer transform duration-300 opacity-0 group-hover:opacity-100 group-hover:translate-x-5"},o(J,null)),o("div",{onClick:()=>t&&t({action:2,id:e.id}),class:"inline-block w-4 h-3 cursor-pointer transform duration-300 opacity-0 group-hover:opacity-100 group-hover:translate-x-6"},o(F,null)),e.children&&o("div",{onClick:()=>r(!n),class:"inline-block w-4 h-3 cursor-pointer transform duration-300 opacity-0 group-hover:opacity-100 group-hover:translate-x-7"},n?o(P,null):o(U,null))))}function m({tree:e,onClick:t}){const[n,r]=y(!1),[s,i]=y(!1),l=a=>{const{action:d}=a;if(d===1){i(!0);return}t(a)},c=a=>{i(!1),a&&t({action:1,parentId:e.id,dto:{content:a}})};return o(S,null,o(_,{cell:e,onClick:l,isCollapsed:n,setIsCollapsed:r,onCreate:()=>i(!0)}),o("section",{class:"transition duration-500 ease-in-out overflow-hidden",style:`padding-left: 35px;height:${n?0:"auto"}`},e.children&&e.children.map(a=>o(m,{tree:a,onClick:t})),s&&o(N,{onOk:c,onCancel:()=>i(!1)})))}m.TreeItem=_;m.CreateTreeItem=N;var W=m;function oe(e){try{return JSON.parse(JSON.stringify(e))}catch{return e}}function re(e,t){const n={},r=[],s=oe(e);s.map(i=>{n[i.id]=i});for(let i=0,l=s.length;i<l;i++){const c=s[i].parentId;if(c==t){r.push(s[i]);continue}n[c].children?n[c].children.push(s[i]):n[c].children=[s[i]]}return r}function g(){try{const e=localStorage.getItem("fre_todo_list");if(e)return JSON.parse(e);{const t=[];return w(t),t}}catch{return}}function w(e){try{localStorage.setItem("fre_todo_list",JSON.stringify(e))}catch{throw Error("\u5B58\u50A8todos\u5931\u8D25")}}async function se(){const{byId:e,allIds:t}={byId:{},allIds:[]};try{const n=g();n&&n.forEach(r=>{e[r.id]=r,t.push({id:r.id,parentId:r.parentId})})}catch(n){console.log(n)}return{byId:e,allIds:t}}async function ie(e,t){try{const n=g(),r=new Date().getTime();return w([...n,{id:r,finished:!1,content:t.content,parentId:e}]),{id:r,finished:!1,content:t.content}}catch{return}}async function ae(e,t){try{const n=g(),r=n.findIndex(s=>s.id==e);return r===-1?void 0:(n[r].content=t.content,n[r].finished=t.finished,w(n),n[r])}catch{return}}async function le(e){try{let n=function(s,i){const l=[],c=s.filter(d=>i===d.id)[0];return c?(l.push(c.id),s.filter(d=>c.id===d.parentId).forEach(d=>{l.push(...n(s,d.id))}),l):[]};const t=g(),r=n(t,e);return w(t.filter(s=>!r.includes(s.id))),r}catch{return[]}}const de=(e,t)=>{const{byId:n,allIds:r}=e;switch(t.type){case"saveState":return t.payload;case"addItem":return n[t.payload.node.id]=t.payload.node,{byId:n,allIds:[...r,{id:t.payload.node.id,parentId:t.payload.parentId}]};case"updateItem":return n[t.payload.id]=t.payload,{byId:n,allIds:r};case"removeItem":return f(h({},e),{allIds:r.filter(s=>!t.payload.includes(s.id))});default:return e}};function ce(){const[e,t]=j(de,{byId:{},allIds:[]}),{byId:n,allIds:r}=e;C(async()=>{const a=await se();t({type:"saveState",payload:a})},[]);const s=K(()=>{function a(d){return d.map(u=>(u.children&&(u.children=a(u.children)),h(h({},n[u.id]),u)))}return a(re(r,-1))},[e]),i=b(async(a,d)=>{const u=await ie(a,d);u&&t({type:"addItem",payload:{parentId:a,node:u}})},[t]),l=b(async(a,d)=>{const u=await ae(a,d);u&&t({type:"updateItem",payload:u})},[t]),c=b(async a=>{const d=await le(a);d.length&&t({type:"removeItem",payload:d})},[t]);return{todoTree:s,onAdd:i,onUpdate:l,onRemove:c}}const{CreateTreeItem:ue}=W;function he(){const{todoTree:e,onUpdate:t,onAdd:n,onRemove:r}=ce(),[s,i]=y(!1),l=({action:a,id:d,dto:u,parentId:E})=>{switch(a){case 1:n(E,u);break;case 2:r(d);break;case 3:t(d,u);break}},c=a=>{n(-1,{content:a}),i(!1)};return o(R,null,o("div",{onClick:()=>i(!0),class:"hover:shadow-lg hover:border-transparent hover:shadow-xs cursor-pointer w-full text-center rounded-lg border-2 border-dashed border-gray-200 py-4"},"Add"),e&&e.map(a=>o(W,{tree:a,onClick:l})),s&&o(ue,{onOk:c,onCancel:()=>i(!1)}))}var fe=he;function pe(){return o(fe,null)}var ve=pe;$(o(ve,null),document.getElementById("root"));
